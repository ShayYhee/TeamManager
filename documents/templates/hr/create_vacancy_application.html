{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
<div class="card mb-4 bg-light">
    <div class="card-body d-flex align-items-center">
        {% if vacancy.tenant.company_profile.photo %}
            <img src="{{ vacancy.tenant.company_profile.photo.url }}" alt="{{ vacancy.tenant.name }} Logo" class="img-fluid me-3" style="max-width: 100px; max-height: 100px;">
        {% else %}
            <i class="fas fa-building fa-3x me-3 text-primary"></i>
        {% endif %}
        <div>
            <h3 class="card-title"><i class="fas fa-briefcase"></i> {{ vacancy.tenant.name }}</h3>
            <p class="card-text">
                {% if vacancy.tenant.company_profile.description %}
                    {{ vacancy.tenant.company_profile.description|truncatewords:20 }}
                {% else %}
                    No company description available.
                {% endif %}
            </p>
        </div>
    </div>
</div>
    <h2><i class="fas fa-briefcase"></i> {{ vacancy.title }}</h2>
    <form method="POST" class="vacancy-form" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label"><i class="fas fa-heading"></i> First Name</label>
            {{ form.first_name }}
            {% if form.first_name.errors %}
                <div class="text-danger">{{ form.first_name.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.middle_name.id_for_label }}" class="form-label"><i class="fas fa-heading"></i> Middle Name</label>
            {{ form.middle_name }}
            {% if form.middle_name.errors %}
                <div class="text-danger">{{ form.middle_name.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.last_name.id_for_label }}" class="form-label"><i class="fas fa-heading"></i> Last Name</label>
            {{ form.last_name }}
            {% if form.last_name.errors %}
                <div class="text-danger">{{ form.last_name.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.phone.id_for_label }}" class="form-label"><i class="fas fa-phone"></i> Phone</label>
            {{ form.phone }}
            {% if form.phone.errors %}
                <div class="text-danger">{{ form.phone.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label"><i class="fas fa-envelope"></i> Email</label>
            {{ form.email }}
            {% if form.email.errors %}
                <div class="text-danger">{{ form.email.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.country.id_for_label }}" class="form-label"><i class="fas fa-globe"></i> Country</label>
            {{ form.country }}
            {% if form.country.errors %}
                <div class="text-danger">{{ form.country.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.city.id_for_label }}" class="form-label"><i class="fas fa-building"></i> City</label>
            {{ form.city }}
            {% if form.city.errors %}
                <div class="text-danger">{{ form.city.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.cv.id_for_label }}" class="form-label"><i class="fas fa-file"></i> CV/Resume</label>
            {{ form.cv }}
            {% if form.cv.errors %}
                <div class="text-danger">{{ form.cv.errors }}</div>
            {% endif %}
        </div>
        <div class="form-group mb-3">
            <label for="{{ form.cover_letter.id_for_label }}" class="form-label"><i class="fas fa-file-alt"></i> Cover Letter</label>
            {{ form.cover_letter }}
            {% if form.cover_letter.errors %}
                <div class="text-danger">{{ form.cover_letter.errors }}</div>
            {% endif %}
        </div>
        {% if form.non_field_errors %}
            <div class="text-danger">{{ form.non_field_errors }}</div>
        {% endif %}
        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Apply</button>
        <a href="{% url 'vacancy_post' vacancy.share_token %}" class="btn btn-secondary"><i class="fas fa-times"></i> Cancel</a>
    </form>
</div>
</div>
{% endblock %}